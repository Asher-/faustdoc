<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Frequently Asked Questions - Faust Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="/css/quickref.css" rel="stylesheet">
        <link href="/rail/railroad-diagrams.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../.."><img src="../../img/faustText.svg" width="150px"> </a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Faust Manual <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../overview/" class="dropdown-item">Overview of the Faust Universe</a>
</li>
                                    
<li>
    <a href="../quick-start/" class="dropdown-item">Quick start</a>
</li>
                                    
<li>
    <a href="../syntax/" class="dropdown-item">Faust Syntax</a>
</li>
                                    
<li>
    <a href="../compiler/" class="dropdown-item">Using the Compiler</a>
</li>
                                    
<li>
    <a href="../options/" class="dropdown-item">Compiler Options</a>
</li>
                                    
<li>
    <a href="../architectures/" class="dropdown-item">Architecture Files</a>
</li>
                                    
<li>
    <a href="../deploying/" class="dropdown-item">Deploying on the Web</a>
</li>
                                    
<li>
    <a href="../remote/" class="dropdown-item">Remote compilation</a>
</li>
                                    
<li>
    <a href="../osc/" class="dropdown-item">OSC Support</a>
</li>
                                    
<li>
    <a href="../http/" class="dropdown-item">HTTP Support</a>
</li>
                                    
<li>
    <a href="../midi/" class="dropdown-item">MIDI Support</a>
</li>
                                    
<li>
    <a href="../soundfiles/" class="dropdown-item">Soundfiles Support</a>
</li>
                                    
<li>
    <a href="../tools/" class="dropdown-item">faust2[...] Tools</a>
</li>
                                    
<li>
    <a href="../embedding/" class="dropdown-item">Embedding the Compiler</a>
</li>
                                    
<li>
    <a href="../optimizing/" class="dropdown-item">Optimizing the Code</a>
</li>
                                    
<li>
    <a href="../community/" class="dropdown-item">Community</a>
</li>
                                    
<li>
    <a href="../mathdoc/" class="dropdown-item">Mathematical Documentation</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Frequently Asked Questions</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../examples/ambisonics/" class="dropdown-item"> ambisonics </a>
</li>
                                    
<li>
    <a href="../../examples/analysis/" class="dropdown-item"> analysis </a>
</li>
                                    
<li>
    <a href="../../examples/bela/" class="dropdown-item"> bela </a>
</li>
                                    
<li>
    <a href="../../examples/delayEcho/" class="dropdown-item"> delayEcho </a>
</li>
                                    
<li>
    <a href="../../examples/dynamic/" class="dropdown-item"> dynamic </a>
</li>
                                    
<li>
    <a href="../../examples/filtering/" class="dropdown-item"> filtering </a>
</li>
                                    
<li>
    <a href="../../examples/gameaudio/" class="dropdown-item"> gameaudio </a>
</li>
                                    
<li>
    <a href="../../examples/generator/" class="dropdown-item"> generator </a>
</li>
                                    
<li>
    <a href="../../examples/misc/" class="dropdown-item"> misc </a>
</li>
                                    
<li>
    <a href="../../examples/phasing/" class="dropdown-item"> phasing </a>
</li>
                                    
<li>
    <a href="../../examples/physicalModeling/" class="dropdown-item"> physicalModeling </a>
</li>
                                    
<li>
    <a href="../../examples/pitchShifting/" class="dropdown-item"> pitchShifting </a>
</li>
                                    
<li>
    <a href="../../examples/psychoacoustic/" class="dropdown-item"> psychoacoustic </a>
</li>
                                    
<li>
    <a href="../../examples/reverb/" class="dropdown-item"> reverb </a>
</li>
                                    
<li>
    <a href="../../examples/SAM/" class="dropdown-item"> SAM </a>
</li>
                                    
<li>
    <a href="../../examples/smartKeyboard/" class="dropdown-item"> smartKeyboard </a>
</li>
                                    
<li>
    <a href="../../examples/spat/" class="dropdown-item"> spat </a>
</li>
                                    
<li>
    <a href="../../rsrc/examples.zip" class="dropdown-item"> Download examples </a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item">Faust & JUCE</a>
</li>
                                    
<li>
    <a href="../../tutorials/teensy/" class="dropdown-item">DSP on the Teensy With Faust</a>
</li>
                                    
<li>
    <a href="../../tutorials/esp32/" class="dropdown-item">DSP on the ESP-32 With Faust</a>
</li>
                                    
<li>
    <a href="../../tutorials/basic-osc/" class="dropdown-item">Making a Sine Oscillator From Scratch</a>
</li>
                                    
<li>
    <a href="../../tutorials/summation/" class="dropdown-item">RMS and Summation in Faust</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Workshops <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../workshops/2018-12-01-paw/" class="dropdown-item"> 2018-12-01 PAW </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-03-24-faust-citi/" class="dropdown-item"> 2020-03-24 CITI </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-04-10-faust-101/" class="dropdown-item"> 2020-04-10 Faust 101 </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-04-10-faust-juce/" class="dropdown-item"> 2020-04-10 Faust & JUCE </a>
</li>
                                    
<li>
    <a href="../../workshops/2020-11-21-faust-vcvrack/" class="dropdown-item"> 2020-11-21 Faust & VCV Rack </a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        

        <div class="container">
            <div class="row"><div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#frequently-asked-questions" class="nav-link">Frequently Asked Questions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#does-select2-behaves-as-a-standard-cc-like-if" class="nav-link">Does select2 behaves as a standard C/C++ like if ?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#produced-nan-or-infinity-values-and-table-access" class="nav-link">Produced NaN or INFINITY values and table access</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#pattern-matching-and-lists" class="nav-link">Pattern matching and lists</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#what-is-the-situation-about-faust-compiler-licence-and-the-deployed-code" class="nav-link">What is the situation about Faust compiler licence and the deployed code?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9 main-container" role="main">

<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<h2 id="does-select2-behaves-as-a-standard-cc-like-if">Does select2 behaves as a standard C/C++ like if ?</h2>
<p>The semantics of Faust is always strict. That's why there is no real <code>if</code> in Faust. And that's why the <code>ba.if</code> in the library (based on <code>select2</code> ) can be misleading. </p>
<p>Concerning the way <code>select2</code> is compiled, in principle, the strict semantic is always preserved. In particular, the type system flags problematic expressions and the stateful parts are always placed outside the if.  For example:</p>
<pre><code>process = button(&quot;choose&quot;), (*(3) : +~_), (*(7):+~_) : select2;
</code></pre>
<p>is compiled in C/C++ as:</p>
<pre><code>for (int i = 0; (i &lt; count); i = (i + 1)) {
    fRec0[0] = (fRec0[1] + (3.0f * float(input0[i])));
    fRec1[0] = (fRec1[1] + (7.0f * float(input1[i])));
    output0[i] = FAUSTFLOAT((iSlow0 ? fRec1[0] : fRec0[0]));
    fRec0[1] = fRec0[0];
    fRec1[1] = fRec1[0];
}
</code></pre>
<p>In order for the stateful parts to be always computed, and therefore preserve the strict semantic, even if a non-strict <code>(cond) ? then : else</code> expression is used.</p>
<p>But it turns out that due to a bug in the compiler, the code generated for <code>select2</code> and <code>select3</code> is not really strict! Moreover, <strong>our interval calculation system, which is supposed to detect this kind of error, is currently quite imperfect and doesn't do it</strong>. </p>
<p>For computations that need to avoid certains values or ranges (like doing  <code>val/0</code> that would return INF, or <code>log</code> of a negative value that would return NAN), the solution is to use min and max to force the arguments to be in the right range of values. For example, to avoid division by 0, you can write <code>1/max(epsilon, x)</code>.</p>
<h2 id="produced-nan-or-infinity-values-and-table-access">Produced NaN or INFINITY values and table access</h2>
<p>On a computer, doing a computation that is undefined in mathematics (like <code>val/0</code> of <code>log(-1)</code>), and unrepresentable in floating-point arithmetic, will produce a <a href="https://en.wikipedia.org/wiki/NaN">NaN</a> value, which has a <a href="https://en.cppreference.com/w/cpp/numeric/math/NAN">special internal representation</a>. </p>
<p>Similarly, some computations will exceed the range that is representable with floating-point arithmetics, and are represented with a special <a href="https://en.cppreference.com/w/cpp/numeric/math/INFINITY">INFINITY</a> macro, which value depends of the choosen type (like <code>float</code>, <code>double</code> or <code>long double</code>).</p>
<p>After being produced, those values can actually <em>contaminate</em> the following flow of computations (that is <code>Nan + any value = NaN</code> for instance) up to the point of producing incorrect indexes when used in array access, and causing memory access crashes.  </p>
<p>In Faust, the interval calculation system on signals is supposed to detect possible problematic computations at compile time, and refuse to compile the corresponding DSP code. But <strong>since the interval calculation is currently quite imperfect</strong>, it can misbehave and generate possible problematic code, <strong>that will possibly misbehave at runtime</strong>. The typical case is when producing indexes to access rdtable/rwtable or delay lines, <strong>that may trigger memory access crashes as explained before</strong>.</p>
<p>Several strategies have been developed to help programmers better understand their written DSP code, and possibly analyse it both at compile time and runtime:</p>
<ul>
<li>at compile time, using the <code>-ct</code> and  <code>-cat</code> compilation options allows to check table index range, by verifying that the actual signal range is compatible with the actual table size. Note that since the interval calculation is currently imperfect, you may see <em>false positive</em> especially when using recursive signals where the interval calculation system will typically produce <em>[-INFINITY, INFINITY]</em> range, which is not precise enough to correctly describe the real signal range. </li>
<li>at runtime, the <a href="https://github.com/grame-cncm/faust/tree/master-dev/tools/benchmark">inter-tracer</a> tool runs and instruments the compiled program using the Interpreter backend, and can give various informations like the production <em>NaN</em> or <em>INFINITY</em> values, and using the <code>-me</code> with the <code>faust2caqt</code> script to catch math computation exceptions (see the <a href="https://faustdoc.grame.fr/manual/optimizing/">Debugging the DSP Code</a> section in the documentation).</li>
</ul>
<p>Note that the Faust <a href="https://faustlibraries.grame.fr/libs/maths/">math library</a> contains the implementation of the<code>INFINITY</code> value (depending of the choosen type like <code>float</code>, <code>double</code> or <code>quad</code>), and <code>isnan</code> and <code>isinf</code>  functions that may help during development.</p>
<h2 id="pattern-matching-and-lists">Pattern matching and lists</h2>
<p>Strictly speaking, there are no lists in Faust. For example the expression <code>()</code> or <code>NIL</code> in Lisp, which indicates an empty list, does not exist in Faust. Similarly, the distinction in Lisp between the number <code>3</code> and the list with only one element <code>(3)</code> does not exist in Faust. </p>
<p>However, list operations can be simulated (in part) using the parallel binary composition operation <code>,</code> and pattern matching. The parallel composition operation is right-associative. This means that the expression <code>(1,2,3,4)</code> is just a simplified form of the fully parenthesized expression <code>(1,(2,(3,4)))</code>. The same is true for <code>(1,2,(3,4))</code> which is also a simplified form of the same fully parenthesized expression <code>(1,(2,(3,4)))</code>. </p>
<p>You can think of pattern-matching as always being done on fully parenthesized expressions. Therefore no Faust function can ever distinguish <code>(1,2,3,4)</code> from <code>(1,2,(3,4))</code>, because they represent the same fully parenthesized expression <code>(1,(2,(3,4)))</code>. </p>
<p>This is why <code>ba.count( ((1,2), (3,4), (5,6)) )</code> is not 3 but 4, and also why <code>ba.count( ((1,2), ((3,4),5,6)) )</code> is not 2 but 4. </p>
<p>Explanation: in both cases the fully parenthesized expression is <code>( (1,2),((3,4),(5,6)) )</code>. The definition of  <code>ba.count</code> being:</p>
<pre><code>count((x,y)) = 1 + count(y);  // rule R1
count(x)     = 1;             // rule R2 
</code></pre>
<p>we have:</p>
<pre><code>ba.count( ((1,2),((3,4),(5,6))) ) 
-R1-&gt;   1 + ba.count( ((3,4),(5,6)) ) 
-R1-&gt;   1 + 1 +  ba.count( (5,6) ) 
-R1-&gt;   1 + 1 + 1 + ba.count( 6 )
-R2-&gt;   1 + 1 + 1 + 1 
</code></pre>
<p>Please note that pattern matching is not limited to parallel composition, the other composition operators <code>(&lt;: : :&gt; ~)</code> can be used too.</p>
<h2 id="what-is-the-situation-about-faust-compiler-licence-and-the-deployed-code">What is the situation about Faust compiler licence and the deployed code?</h2>
<p><em>Q: Does the Faust license (GPL) apply somehow to the code exports that it produces as well? Or can the license of the exported code be freely chosen such that one could develop commercial software (e.g. VST plug-ins) using Faust?</em></p>
<p>A: You can freely use Faust to develop commercial software. The GPL license of the compiler <em>doesn't</em> apply to the code generated by the compiler. </p>
<p>The license of the code generated by the Faust compiler depends only on the licenses of the input files. You should therefore check the licenses of the Faust libraries used and the architecture files. On the whole, when used unmodified, Faust libraries and architecture files are compatible with commercial, non-open source use.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020-2021 <a href="https://www.grame.fr">Grame-CNCM</a></p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
